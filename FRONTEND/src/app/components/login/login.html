<!-- ===============================
     BACKGROUND MAP (GIS CONTEXT)
================================ -->
<img src="assets/images/i.jpg" class="bg-map" alt="Map background" />

<!-- ===============================
     LANGUAGE PILL (TOP RIGHT)
================================ -->
<div class="lang-pill">
  <span class="lang-icon">A</span>
  <span>English</span>
</div>

<!-- ===============================
     LOGIN WRAPPER
================================ -->
<div class="login-wrapper">

  <!-- ===============================
       PORTAL CARD
  ================================ -->
  <div class="portal-card">

  <!-- ===============================
       HEADER (LOGOS STRIP)
  ================================ -->
  <div class="portal-header">

    <div class="header-seg">
      <img src="assets/images/indian-national-emblem-ashoka.webp" class="logo" alt="Government of India" />
    </div>

    <div class="header-seg">
      <img src="assets/images/amofficialcris_logo.jpg" class="logo" alt="CRIS Logo" />
    </div>

    <div class="header-seg">
      <img src="assets/images/Indian_Railways.svg" class="logo" alt="IR Logo" />
    </div>

  </div>

  <div class="portal-body">

    <!-- Title -->
    <div class="brand-row">
      <div class="brand-title">
        <span class="rail-I" aria-hidden="true"></span>
        ndian Railways Geo Application
      </div>
    </div>

    <!-- Subtitle -->
    <div class="hint">
      {{ loginStep === 'LOGIN' ? 'Please enter details to proceed' : 'Enter OTP received on mail' }}
    </div>

    <!-- ===============================
         STEP 1: USERNAME + PASSWORD
    ================================ -->
    <form
      *ngIf="loginStep === 'LOGIN'"
      class="form-area"
      (ngSubmit)="login()"
      #loginForm="ngForm"
    >

      <div class="field">
        <input
          type="text"
          name="username"
          class="line-input"
          placeholder="Enter User ID"
          required
          [(ngModel)]="username"
        />
      </div>

      <div class="field pw-field">
        <input
          [type]="showPassword ? 'text' : 'password'"
          name="password"
          class="line-input"
          placeholder="Enter Password"
          required
          [(ngModel)]="password"
        />

        <button
          type="button"
          class="eye-btn"
          (click)="showPassword = !showPassword"
          aria-label="Toggle password visibility"
        >
          {{ showPassword ? 'üôà' : 'üëÅ' }}
        </button>
      </div>

      <label class="check-row">
        <input type="checkbox" name="consent" required [(ngModel)]="consent" />
        <span>
          I consent to IR Asset Management Portal's
          <a href="#" class="link">Privacy Policy</a>
          and
          <a href="#" class="link">Terms Of Use</a>
        </span>
      </label>

      <!-- Sign in button below consent -->
      <div class="sign-in-row">
        <button
          type="submit"
          class="next-btn sign-in-btn"
          [disabled]="loading || !loginForm.valid"
        >
          {{ loading ? 'Signing in‚Ä¶' : 'Sign in' }}
        </button>
      </div>

      <!-- Optional: keep captcha / user icon at bottom -->
      <div class="actions-row">
        <div></div>
        <div class="captcha-box" aria-label="captcha placeholder">
          <span style="color:#0b86a7;">üë§</span>
        </div>
      </div>

      <div *ngIf="error" class="error-text">
        {{ error }}
      </div>

    </form>


    <!-- ===============================
         STEP 2: OTP SCREEN (same card)
    ================================ -->
<form
  *ngIf="loginStep === 'OTP'"
  class="form-area"
  (ngSubmit)="verifyOtp()"
  #otpForm="ngForm"
>
  <!-- ‚úÖ server message shown here -->
  <div class="hint" style="margin-top: 0;" *ngIf="infoMsg">
    {{ infoMsg }}
  </div>

  <div class="field">
    <input
      type="text"
      name="otp"
      class="line-input text-center"
      placeholder="Enter OTP"
      required
      minlength="4"
      maxlength="8"
      [(ngModel)]="otp"
      autocomplete="one-time-code"
    />
  </div>

  <div class="sign-in-row">
    <button
      type="submit"
      class="next-btn sign-in-btn"
      [disabled]="loading || !otpForm.valid"
    >
      {{ loading ? 'Connecting‚Ä¶' : 'Verify OTP' }}
    </button>
  </div>

  <!-- <div class="actions-row otp-actions">
    <button type="button" class="link-btn" (click)="backToLogin()" [disabled]="loading">
      ‚Üê Back
    </button>

    <button type="button" class="link-btn" (click)="resendOtp()" [disabled]="loading">
      Resend OTP
    </button>
  </div> -->

  <div *ngIf="error" class="error-text">
    {{ error }}
  </div>
</form>


  </div>
</div>

</div>
